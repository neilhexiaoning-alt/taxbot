# OpenClaw Desktop - æ™ºç¨å®æ¡Œé¢åº”ç”¨

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒæ¶æ„
- âœ… Electron ä¸»è¿›ç¨‹ (`electron/main.cjs`)
- âœ… é¢„åŠ è½½è„šæœ¬ (`electron/preload.cjs`)
- âœ… è‡ªåŠ¨å¯åŠ¨ Gateway æœåŠ¡å™¨
- âœ… ç³»ç»Ÿæ‰˜ç›˜é›†æˆ
- âœ… çª—å£ç®¡ç†ï¼ˆæœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼‰

### 2. åŠŸèƒ½ç‰¹æ€§
- âœ… å¼€æœºè‡ªå¯åŠ¨é€‰é¡¹
- âœ… Gateway æœåŠ¡ç®¡ç†ï¼ˆè‡ªåŠ¨å¯åŠ¨/é‡å¯ï¼‰
- âœ… TaxChat UI é›†æˆ
- âœ… æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜
- âœ… æ‰˜ç›˜èœå•ï¼ˆæ˜¾ç¤º/éšè—ã€é‡å¯æœåŠ¡ã€é€€å‡ºï¼‰

### 3. æ‰“åŒ…é…ç½®
- âœ… electron-builder é…ç½®
- âœ… NSIS å®‰è£…ç¨‹åºï¼ˆWindowsï¼‰
- âœ… ä¾¿æºç‰ˆï¼ˆPortableï¼‰
- âœ… æ”¯æŒ macOS å’Œ Linuxï¼ˆå¾…æµ‹è¯•ï¼‰

## ğŸ“¦ æ–‡ä»¶ç»“æ„

```
openclaw-main/
â”œâ”€â”€ electron/
â”‚   â”œâ”€â”€ main.cjs          # Electron ä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ preload.cjs       # é¢„åŠ è½½è„šæœ¬
â”‚   â”œâ”€â”€ package.json      # Electron åŒ…é…ç½®
â”‚   â””â”€â”€ ICON_README.md    # å›¾æ ‡è¯´æ˜
â”œâ”€â”€ electron-builder.json # æ‰“åŒ…é…ç½®
â””â”€â”€ package.json          # æ·»åŠ äº† Electron è„šæœ¬
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¼€å‘æ¨¡å¼è¿è¡Œ

```bash
# 1. æ„å»ºé¡¹ç›®å’Œ UI
pnpm build
pnpm ui:build

# 2. è¿è¡Œ Electron åº”ç”¨
pnpm electron:dev
```

**æˆ–è€…ä¸€æ­¥å®Œæˆï¼š**
```bash
pnpm electron:dev
```

### æ‰“åŒ…å®‰è£…ç¨‹åº

#### Windows å®‰è£…ç¨‹åºï¼ˆNSISï¼‰
```bash
pnpm electron:build
```
ç”Ÿæˆæ–‡ä»¶ä½äºï¼š`dist-electron/æ™ºç¨å®-2026.2.1-win-x64.exe`

#### Windows ä¾¿æºç‰ˆ
```bash
pnpm electron:build:portable
```
ç”Ÿæˆæ–‡ä»¶ï¼š`dist-electron/æ™ºç¨å®-2026.2.1-portable.exe`

#### ä»…æ‰“åŒ…ï¼ˆä¸ç”Ÿæˆå®‰è£…ç¨‹åºï¼‰
```bash
pnpm electron:pack
```
ç”¨äºæµ‹è¯•æ‰“åŒ…ç»“æœã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. çª—å£ç®¡ç†
- å¯åŠ¨åæ˜¾ç¤º TaxChat ç•Œé¢
- ç‚¹å‡»å…³é—­æŒ‰é’®æœ€å°åŒ–åˆ°æ‰˜ç›˜ï¼ˆä¸é€€å‡ºï¼‰
- æ‰˜ç›˜å›¾æ ‡ç‚¹å‡»åˆ‡æ¢çª—å£æ˜¾ç¤º/éšè—

### 2. ç³»ç»Ÿæ‰˜ç›˜
å³é”®æ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºèœå•ï¼š
- **æ˜¾ç¤ºçª—å£** - æ˜¾ç¤ºå¹¶èšç„¦ä¸»çª—å£
- **Gateway çŠ¶æ€** - æ˜¾ç¤ºæœåŠ¡è¿è¡ŒçŠ¶æ€
- **é‡å¯ Gateway** - é‡å¯åç«¯æœåŠ¡
- **å¼€æœºè‡ªå¯åŠ¨** - åˆ‡æ¢è‡ªå¯åŠ¨é€‰é¡¹
- **é€€å‡º** - å®Œå…¨é€€å‡ºåº”ç”¨

### 3. Gateway æœåŠ¡
- åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ Gateway
- æœåŠ¡å¼‚å¸¸æ—¶è‡ªåŠ¨é‡å¯
- é€€å‡ºåº”ç”¨æ—¶è‡ªåŠ¨åœæ­¢æœåŠ¡

### 4. å¼€å‘è€…å·¥å…·
å¼€å‘æ¨¡å¼ä¸‹è‡ªåŠ¨æ‰“å¼€ DevToolsï¼ˆè®¾ç½® `NODE_ENV=development`ï¼‰

## ğŸ”§ é«˜çº§é…ç½®

### ä¿®æ”¹çª—å£å°ºå¯¸
ç¼–è¾‘ `electron/main.cjs`:
```javascript
const APP_CONFIG = {
  width: 1200,  // é»˜è®¤å®½åº¦
  height: 800,  // é»˜è®¤é«˜åº¦
  gatewayPort: 18789,
};
```

### ä¿®æ”¹åº”ç”¨åç§°
ç¼–è¾‘ `electron-builder.json`:
```json
{
  "productName": "æ™ºç¨å®",
  "appId": "com.openclaw.taxchat"
}
```

### æ·»åŠ åº”ç”¨å›¾æ ‡
å‚è€ƒ `electron/ICON_README.md` å‡†å¤‡å›¾æ ‡æ–‡ä»¶

## ğŸ“ æ‰“åŒ…å‘å¸ƒæµç¨‹

### 1. å‡†å¤‡å›¾æ ‡ï¼ˆå¯é€‰ï¼‰
å°† SVG logo è½¬æ¢ä¸º ICO/ICNS/PNG æ ¼å¼

### 2. æ›´æ–°ç‰ˆæœ¬å·
ç¼–è¾‘ `package.json`:
```json
{
  "version": "1.0.0"
}
```

### 3. æ„å»ºå®‰è£…ç¨‹åº
```bash
# å®Œæ•´æ„å»º
pnpm build
pnpm ui:build
pnpm electron:build

# ç”Ÿæˆçš„æ–‡ä»¶åœ¨ dist-electron/ ç›®å½•
```

### 4. æµ‹è¯•å®‰è£…ç¨‹åº
- è¿è¡Œç”Ÿæˆçš„ .exe æ–‡ä»¶
- æµ‹è¯•å®‰è£…ã€å¯åŠ¨ã€åŠŸèƒ½
- æµ‹è¯•å¸è½½

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šçª—å£æ— æ³•æ˜¾ç¤º
**è§£å†³**ï¼šæ£€æŸ¥ `dist/control-ui/taxchat.html` æ˜¯å¦å­˜åœ¨
```bash
pnpm ui:build
```

### é—®é¢˜ï¼šGateway æ— æ³•å¯åŠ¨
**è§£å†³**ï¼šæ£€æŸ¥é¡¹ç›®æ˜¯å¦å·²æ„å»º
```bash
pnpm build
```

### é—®é¢˜ï¼šæ‰˜ç›˜å›¾æ ‡ä¸æ˜¾ç¤º
**è§£å†³**ï¼šå‡†å¤‡æ­£ç¡®çš„å›¾æ ‡æ–‡ä»¶ï¼Œæˆ–æš‚æ—¶ä½¿ç”¨é»˜è®¤å›¾æ ‡

### é—®é¢˜ï¼šæ‰“åŒ…å¤±è´¥
**è§£å†³**ï¼š
1. æ£€æŸ¥ Node.js ç‰ˆæœ¬ >= 22.12.0
2. æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
```bash
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

## ğŸ¨ è‡ªå®šä¹‰å¼€å‘

### æ·»åŠ èœå•æ 
ç¼–è¾‘ `electron/main.cjs`ï¼Œåœ¨ `createMainWindow` ä¸­ï¼š
```javascript
const { Menu } = require('electron');
const menu = Menu.buildFromTemplate([...]);
Menu.setApplicationMenu(menu);
```

### æ·»åŠ  IPC é€šä¿¡
1. åœ¨ `electron/main.cjs` æ·»åŠ  IPC å¤„ç†
2. åœ¨ `electron/preload.cjs` æš´éœ² API
3. åœ¨æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨ `window.electronAPI.*`

### æ·»åŠ è‡ªåŠ¨æ›´æ–°
å®‰è£… `electron-updater`:
```bash
pnpm add electron-updater
```

å‚è€ƒå®˜æ–¹æ–‡æ¡£é…ç½®è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ã€‚

## ğŸ“š ç›¸å…³èµ„æº

- [Electron å®˜æ–¹æ–‡æ¡£](https://www.electronjs.org/docs)
- [electron-builder æ–‡æ¡£](https://www.electron.build/)
- [OpenClaw é¡¹ç›®](https://github.com/anthropics/openclaw)

## âœ¨ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æ·»åŠ åº”ç”¨å›¾æ ‡
- [ ] å®ç°è‡ªåŠ¨æ›´æ–°
- [ ] æ·»åŠ æ›´å¤šæ‰˜ç›˜åŠŸèƒ½
- [ ] ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦
- [ ] æ·»åŠ å´©æºƒæŠ¥å‘Š
- [ ] æ‰“åŒ… macOS/Linux ç‰ˆæœ¬

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥ `ELECTRON_README.md` æ•…éšœæ’æŸ¥éƒ¨åˆ†
2. æŸ¥çœ‹ Electron æ§åˆ¶å°æ—¥å¿—
3. æäº¤ Issue åˆ°é¡¹ç›®ä»“åº“
